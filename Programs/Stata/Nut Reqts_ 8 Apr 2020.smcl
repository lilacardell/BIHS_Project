{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\lilac2\Box\BIHS Project\Programs\Stata\Nut Reqts_ 8 Apr 2020.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 8 Apr 2020, 17:18:50
{txt}
{com}. 
. ***Log of Nutrient Requirements Compilation
. di "`c(current_date)' `c(current_time)'"
{res} 8 Apr 2020 17:18:50
{txt}
{com}. 
. // PART 1 // Import and reshape
. 
. * Micronutrients EAR 
. clear 
{txt}
{com}. import excel using "$myfiles$nr", sheet("Micronutrients_EAR") firstrow
{res}{text}(22 vars, 25 obs)

{com}.         // Rename variables (nutr_no follows the "Units_Notes" sheet)
.         gen ear1=.
{txt}(25 missing values generated)

{com}.         gen ear2=.
{txt}(25 missing values generated)

{com}.         gen ear3=.
{txt}(25 missing values generated)

{com}.         gen ear4=.
{txt}(25 missing values generated)

{com}.         gen ear5=.
{txt}(25 missing values generated)

{com}.         rename vitA ear6
{res}{txt}
{com}.         gen ear7=.
{txt}(25 missing values generated)

{com}.         rename vitC ear8
{res}{txt}
{com}.         rename vitE ear9
{res}{txt}
{com}.         rename thiamin ear10
{res}{txt}
{com}.         rename riboflavin ear11
{res}{txt}
{com}.         rename niacin ear12
{res}{txt}
{com}.         rename vitB6 ear13
{res}{txt}
{com}.         rename folate ear14
{res}{txt}
{com}.         rename vitB12 ear15
{res}{txt}
{com}.         rename calcium ear16
{res}{txt}
{com}.         rename copper ear17
{res}{txt}
{com}.         rename iron ear18
{res}{txt}
{com}.         rename magnesium ear19
{res}{txt}
{com}.         rename phosphorus ear20
{res}{txt}
{com}.         rename selenium ear21
{res}{txt}
{com}.         rename zinc ear22
{res}{txt}
{com}.         rename sodium ear23
{res}{txt}
{com}. 
.         // Make sure all variables are numeric
.         describe

{txt}Contains data
  obs:{res}            25                          
{txt} vars:{res}            28                          
{txt}{hline}
              storage   display    value
variable name   type    format     label      variable label
{hline}
{p 0 48}{res}{bind:age_sex_grp    }{txt}{bind: byte    }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}age_sex_grp{p_end}
{p 0 48}{bind:lifestage      }{txt}{bind: str11   }{bind:{txt}%11s      }{space 1}{bind:         }{bind:  }{res}{res}lifestage{p_end}
{p 0 48}{bind:sex            }{txt}{bind: str6    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}sex{p_end}
{p 0 48}{bind:age_lower_yrs  }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}age_lower_yrs{p_end}
{p 0 48}{bind:age_upper_yrs  }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}age_upper_yrs{p_end}
{p 0 48}{bind:ear6           }{txt}{bind: str3    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}vitA{p_end}
{p 0 48}{bind:ear8           }{txt}{bind: str3    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}vitC{p_end}
{p 0 48}{bind:ear9           }{txt}{bind: str2    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}vitE{p_end}
{p 0 48}{bind:ear10          }{txt}{bind: str3    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}thiamin{p_end}
{p 0 48}{bind:ear11          }{txt}{bind: str3    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}riboflavin{p_end}
{p 0 48}{bind:ear12          }{txt}{bind: str2    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}niacin{p_end}
{p 0 48}{bind:ear13          }{txt}{bind: str3    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}vitB6{p_end}
{p 0 48}{bind:ear14          }{txt}{bind: str3    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}folate{p_end}
{p 0 48}{bind:ear15          }{txt}{bind: str3    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}vitB12{p_end}
{p 0 48}{bind:ear16          }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}calcium{p_end}
{p 0 48}{bind:ear17          }{txt}{bind: str17   }{bind:{txt}%17s      }{space 1}{bind:         }{bind:  }{res}{res}copper{p_end}
{p 0 48}{bind:ear18          }{txt}{bind: str3    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}iron{p_end}
{p 0 48}{bind:ear19          }{txt}{bind: str3    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}magnesium{p_end}
{p 0 48}{bind:ear20          }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}phosphorus{p_end}
{p 0 48}{bind:ear21          }{txt}{bind: str2    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}selenium{p_end}
{p 0 48}{bind:ear22          }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}zinc{p_end}
{p 0 48}{bind:ear23          }{txt}{bind: str1    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}sodium{p_end}
{p 0 48}{bind:ear1           }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:ear2           }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:ear3           }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:ear4           }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:ear5           }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:ear7           }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by: 
{res}     Note: Dataset has changed since last saved.
{txt}
{com}.         foreach v of varlist ear* {c -(}
{txt}  2{com}.                 destring `v', replace
{txt}  3{com}.                 {c )-}
{txt}ear6: all characters numeric; {res}replaced {txt}as {res}int
{txt}(2 missing values generated)
{res}{txt}ear8: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(2 missing values generated)
{res}{txt}ear9: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(2 missing values generated)
{res}{txt}ear10: all characters numeric; {res}replaced {txt}as {res}double
{txt}(2 missing values generated)
{res}{txt}ear11: all characters numeric; {res}replaced {txt}as {res}double
{txt}(2 missing values generated)
{res}{txt}ear12: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(2 missing values generated)
{res}{txt}ear13: all characters numeric; {res}replaced {txt}as {res}double
{txt}(2 missing values generated)
{res}{txt}ear14: all characters numeric; {res}replaced {txt}as {res}int
{txt}(2 missing values generated)
{res}{txt}ear15: all characters numeric; {res}replaced {txt}as {res}double
{txt}(2 missing values generated)
{res}{txt}ear16: all characters numeric; {res}replaced {txt}as {res}int
{txt}(2 missing values generated)
{res}{txt}ear17: all characters numeric; {res}replaced {txt}as {res}double
{txt}(2 missing values generated)
{res}{txt}ear18: all characters numeric; {res}replaced {txt}as {res}double
{txt}(1 missing value generated)
{res}{txt}ear19: all characters numeric; {res}replaced {txt}as {res}int
{txt}(2 missing values generated)
{res}{txt}ear20: all characters numeric; {res}replaced {txt}as {res}int
{txt}(2 missing values generated)
{res}{txt}ear21: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(2 missing values generated)
{res}{txt}ear22: all characters numeric; {res}replaced {txt}as {res}double
{txt}(1 missing value generated)
{res}{txt}ear23: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(25 missing values generated)
{res}{txt}ear1 already numeric; no {res}replace
{txt}ear2 already numeric; no {res}replace
{txt}ear3 already numeric; no {res}replace
{txt}ear4 already numeric; no {res}replace
{txt}ear5 already numeric; no {res}replace
{txt}ear7 already numeric; no {res}replace
{txt}
{com}.         // Reshape long
.         reshape long ear, i(lifestage sex age_lower_yrs age_upper_yrs) j(nutr_no)
{txt}(note: j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}      25   {txt}->{res}     575
{txt}Number of variables            {res}      28   {txt}->{res}       7
{txt}j variable (23 values)                    ->   {res}nutr_no
{txt}xij variables:
                    {res}ear1 ear2 ... ear23   {txt}->   {res}ear
{txt}{hline 77}

{com}.         replace ear=. if nutr_no==3 // carbohydrates are repeated in macronutrients
{txt}(0 real changes made)

{com}.         tempfile Micronutrients_EAR
{txt}
{com}.                 save `Micronutrients_EAR', replace
{txt}(note: file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000001.tmp not found)
file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000001.tmp saved

{com}. 
. * Micronutrients UL 
. clear
{txt}
{com}. import excel "$myfiles$nr", sheet("Micronutrients_UL") firstrow
{res}{text}(23 vars, 25 obs)

{com}.         // Rename variables (nutr_no follows the "Units_Notes" sheet)
.         forval i=1/5 {c -(}
{txt}  2{com}.                 gen ul`i'=.
{txt}  3{com}.                 {c )-}
{txt}(25 missing values generated)
(25 missing values generated)
(25 missing values generated)
(25 missing values generated)
(25 missing values generated)

{com}.         rename vitA ul6
{res}{txt}
{com}.         rename retinol ul7
{res}{txt}
{com}.         rename vitC ul8
{res}{txt}
{com}.         rename vitE ul9
{res}{txt}
{com}.         rename thiamin ul10
{res}{txt}
{com}.         rename riboflavin ul11
{res}{txt}
{com}.         rename niacin ul12
{res}{txt}
{com}.         rename vitB6 ul13
{res}{txt}
{com}.         rename folate ul14
{res}{txt}
{com}.         rename vitB12 ul15
{res}{txt}
{com}.         rename calcium ul16
{res}{txt}
{com}.         rename copper ul17
{res}{txt}
{com}.         rename iron ul18
{res}{txt}
{com}.         rename magnesium ul19
{res}{txt}
{com}.         rename phosphorus ul20
{res}{txt}
{com}.         rename selenium ul21
{res}{txt}
{com}.         rename zinc ul22
{res}{txt}
{com}.         rename sodium ul23
{res}{txt}
{com}. 
.         // Make sure all variables are numeric
.         describe

{txt}Contains data
  obs:{res}            25                          
{txt} vars:{res}            28                          
{txt}{hline}
              storage   display    value
variable name   type    format     label      variable label
{hline}
{p 0 48}{res}{bind:age_sex_grp    }{txt}{bind: byte    }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}age_sex_grp{p_end}
{p 0 48}{bind:lifestage      }{txt}{bind: str11   }{bind:{txt}%11s      }{space 1}{bind:         }{bind:  }{res}{res}lifestage{p_end}
{p 0 48}{bind:sex            }{txt}{bind: str6    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}sex{p_end}
{p 0 48}{bind:age_lower_yrs  }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}age_lower_yrs{p_end}
{p 0 48}{bind:age_upper_yrs  }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}age_upper_yrs{p_end}
{p 0 48}{bind:ul6            }{txt}{bind: str1    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}vitA{p_end}
{p 0 48}{bind:ul7            }{txt}{bind: int     }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}retinol{p_end}
{p 0 48}{bind:ul8            }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}vitC{p_end}
{p 0 48}{bind:ul9            }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}vitE{p_end}
{p 0 48}{bind:ul10           }{txt}{bind: str1    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}thiamin{p_end}
{p 0 48}{bind:ul11           }{txt}{bind: str1    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}riboflavin{p_end}
{p 0 48}{bind:ul12           }{txt}{bind: str2    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}niacin{p_end}
{p 0 48}{bind:ul13           }{txt}{bind: str3    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}vitB6{p_end}
{p 0 48}{bind:ul14           }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}folate{p_end}
{p 0 48}{bind:ul15           }{txt}{bind: str1    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}vitB12{p_end}
{p 0 48}{bind:ul16           }{txt}{bind: int     }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}calcium{p_end}
{p 0 48}{bind:ul17           }{txt}{bind: str2    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}copper{p_end}
{p 0 48}{bind:ul18           }{txt}{bind: byte    }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}iron{p_end}
{p 0 48}{bind:ul19           }{txt}{bind: str3    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}magnesium{p_end}
{p 0 48}{bind:ul20           }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}phosphorus{p_end}
{p 0 48}{bind:ul21           }{txt}{bind: int     }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}selenium{p_end}
{p 0 48}{bind:ul22           }{txt}{bind: byte    }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}zinc{p_end}
{p 0 48}{bind:ul23           }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}sodium{p_end}
{p 0 48}{bind:ul1            }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:ul2            }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:ul3            }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:ul4            }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:ul5            }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by: 
{res}     Note: Dataset has changed since last saved.
{txt}
{com}.         forval i=6/23 {c -(}
{txt}  2{com}.                 destring ul`i', replace
{txt}  3{com}.                 {c )-}
{txt}ul6: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(25 missing values generated)
{res}{txt}ul7 already numeric; no {res}replace
{txt}ul8: all characters numeric; {res}replaced {txt}as {res}int
{txt}(2 missing values generated)
{res}{txt}ul9: all characters numeric; {res}replaced {txt}as {res}int
{txt}(2 missing values generated)
{res}{txt}ul10: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(25 missing values generated)
{res}{txt}ul11: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(25 missing values generated)
{res}{txt}ul12: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(2 missing values generated)
{res}{txt}ul13: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(2 missing values generated)
{res}{txt}ul14: all characters numeric; {res}replaced {txt}as {res}int
{txt}(2 missing values generated)
{res}{txt}ul15: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(25 missing values generated)
{res}{txt}ul16 already numeric; no {res}replace
{txt}ul17: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(2 missing values generated)
{res}{txt}ul18 already numeric; no {res}replace
{txt}ul19: all characters numeric; {res}replaced {txt}as {res}int
{txt}(2 missing values generated)
{res}{txt}ul20: all characters numeric; {res}replaced {txt}as {res}int
{txt}(2 missing values generated)
{res}{txt}ul21 already numeric; no {res}replace
{txt}ul22 already numeric; no {res}replace
{txt}ul23: all characters numeric; {res}replaced {txt}as {res}int
{txt}(2 missing values generated)
{res}{txt}
{com}.         // Reshape to long form
.         reshape long ul, i(age_sex_grp) j(nutr_no)
{txt}(note: j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}      25   {txt}->{res}     575
{txt}Number of variables            {res}      28   {txt}->{res}       7
{txt}j variable (23 values)                    ->   {res}nutr_no
{txt}xij variables:
                       {res}ul1 ul2 ... ul23   {txt}->   {res}ul
{txt}{hline 77}

{com}. keep age_sex_grp nutr_no ul
{txt}
{com}. tempfile Micronutrients_UL
{txt}
{com}.         save `Micronutrients_UL', replace
{txt}(note: file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000002.tmp not found)
file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000002.tmp saved

{com}. 
. * Macronutrients EAR 
. clear 
{txt}
{com}. import excel "$myfiles$nr", sheet("Macronutrients_EAR") firstrow
{res}{text}(9 vars, 25 obs)

{com}. drop lifestage sex age_lower_yrs age_upper_yrs
{txt}
{com}. rename refweight_kg refweight_protein_kg
{res}{txt}
{com}. gen nutr_no=4
{txt}
{com}. tempfile Macronutrients_EAR
{txt}
{com}.         save `Macronutrients_EAR', replace
{txt}(note: file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000003.tmp not found)
file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000003.tmp saved

{com}. 
. * Macronutrients AMDR
. clear
{txt}
{com}. import excel "$myfiles$nr", sheet("Macronutrients_AMDR") firstrow
{res}{text}(11 vars, 57 obs)

{com}. cap drop if age_sex_grp==.
{txt}
{com}.         // Rename variables to reshape long
.         rename lipids_lower amdr_lower5
{res}{txt}
{com}.         rename lipids_upper amdr_upper5
{res}{txt}
{com}.         rename carbohydrate_lower amdr_lower3
{res}{txt}
{com}.         rename carbohydrate_upper amdr_upper3
{res}{txt}
{com}.         rename protein_lower amdr_lower4
{res}{txt}
{com}.         rename protein_upper amdr_upper4
{res}{txt}
{com}.         reshape long amdr_lower amdr_upper, i(age_sex_grp lifestage sex age_lower_yrs age_upper_yrs) ///
>                 j(nutr_no)
{txt}(note: j = 3 4 5)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}      25   {txt}->{res}      75
{txt}Number of variables            {res}      11   {txt}->{res}       8
{txt}j variable (3 values)                     ->   {res}nutr_no
{txt}xij variables:
    {res}amdr_lower3 amdr_lower4 amdr_lower5   {txt}->   {res}amdr_lower
    amdr_upper3 amdr_upper4 amdr_upper5   {txt}->   {res}amdr_upper
{txt}{hline 77}

{com}. keep age_sex_grp nutr_no amdr_lower amdr_upper
{txt}
{com}. tempfile Macronutrients_AMDR
{txt}
{com}.         save `Macronutrients_AMDR', replace
{txt}(note: file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000004.tmp not found)
file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000004.tmp saved

{com}. 
. * Energy
. clear
{txt}
{com}. import excel "$myfiles$nr", sheet("Energy") firstrow
{res}{text}(14 vars, 100 obs)

{com}. cap drop M N 
{txt}
{com}. gen nutr_no=2
{txt}
{com}. encode PA_level, gen(pal)
{txt}
{com}.         tab pal

   {txt}PA_level {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
     active {c |}{res}         25       25.00       25.00
{txt} low active {c |}{res}         25       25.00       50.00
{txt}  sedentary {c |}{res}         25       25.00       75.00
{txt}very active {c |}{res}         25       25.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        100      100.00
{txt}
{com}.         tab pal, nolabel

   {txt}PA_level {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         25       25.00       25.00
{txt}          2 {c |}{res}         25       25.00       50.00
{txt}          3 {c |}{res}         25       25.00       75.00
{txt}          4 {c |}{res}         25       25.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        100      100.00
{txt}
{com}.         recode pal (1=3) (2=2) (3=1) (4=4)
{txt}(pal: 50 changes made)

{com}.                 cap lab drop pal
{txt}
{com}.                 lab def pal ///
>                 1 "Sedentary" ///
>                 2 "Low active" ///
>                 3 "Active" ///
>                 4 "Very active" 
{txt}
{com}.         lab val pal pal
{txt}
{com}.         tab pal

   {txt}PA_level {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
  Sedentary {c |}{res}         25       25.00       25.00
{txt} Low active {c |}{res}         25       25.00       50.00
{txt}     Active {c |}{res}         25       25.00       75.00
{txt}Very active {c |}{res}         25       25.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        100      100.00
{txt}
{com}. keep age_sex_grp energy nutr_no pal
{txt}
{com}. order age_sex_grp nutr_no pal energy, first
{txt}
{com}. sort age_sex_grp nutr_no pal
{txt}
{com}. tempfile Energy
{txt}
{com}.         save `Energy', replace
{txt}(note: file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000005.tmp not found)
file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000005.tmp saved

{com}. 
. * Units Notes - imported long by nutrient, merge with UL keeping relevant variables only
. clear
{txt}
{com}. import excel "$myfiles$nr", sheet("Units_Notes") firstrow
{res}{text}(8 vars, 23 obs)

{com}. keep nutr_no ul_note unit amdr_unit
{txt}
{com}. merge m:m nutr_no using `Micronutrients_UL'
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}             575{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. order age_sex_grp nutr_no unit ul, first
{txt}
{com}.         /* NOTE: the sodium UL is the not a Tolerable Upper Intake Level (UL), it is the 
>                 Chronic Disease Risk Reduction (CDDR) level as established in the 2019 
>                 update to the DRIs for sodium and potassium (IOM 2019). 
>                 However it functions in practice as an upper bound constraint for the 
>                 definition of healthy and adequate diets and therefore is included with 
>                 the ULs for analytical convenience.
>                 */
. tempfile Micronutrients_UL
{txt}
{com}.         save `Micronutrients_UL', replace
{txt}(note: file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000006.tmp not found)
file C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000006.tmp saved

{com}. 
. // PART 2 // MERGE ALL
. clear
{txt}
{com}. * Merge datasets except energy
.         use `Micronutrients_EAR'
{txt}
{com}.         // Micronutrients ULs
.         merge 1:1 age_sex_grp nutr_no using `Micronutrients_UL'
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}               0
{txt}{col 5}matched{col 30}{res}             575{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         distinct age_sex_grp nutr_no

{txt}{col 14}{c |}        Observations
{col 14}{c |}      total   distinct
{hline 13}{c +}{hline 22}
 age_sex_grp {c |}  {res}      575         25
     {txt}nutr_no {c |}  {res}      575         23
{txt}
{com}.         drop _merge
{txt}
{com}.         // Macronutrients EAR
.         merge m:1 age_sex_grp nutr_no using `Macronutrients_EAR'
{res}{txt}{p 0 7 2}
(note: variable
nutr_no was 
byte, now double to accommodate using data's values)
{p_end}

{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}             550
{txt}{col 9}from master{col 30}{res}             550{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}matched{col 30}{res}              25{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         drop _merge 
{txt}
{com}.                 foreach v in protein carbohydrate{c -(}
{txt}  2{com}.                         destring `v', replace
{txt}  3{com}.                         {c )-}
{txt}protein: all characters numeric; {res}replaced {txt}as {res}double
{txt}(551 missing values generated)
{res}{txt}carbohydrate: all characters numeric; {res}replaced {txt}as {res}int
{txt}(552 missing values generated)
{res}{txt}
{com}.                 replace ear=protein if nutr_no==4
{txt}(24 real changes made)

{com}.                 replace ear=carbohydrate if nutr_no==3
{txt}(0 real changes made)

{com}.         // Macronutrients AMDR
.                 * Note the macronutrients unit is % total calories
.         merge m:1 age_sex_grp nutr_no using `Macronutrients_AMDR'
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}             500
{txt}{col 9}from master{col 30}{res}             500{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}matched{col 30}{res}              75{txt}  (_merge==3)
{col 5}{hline 41}

{com}.                 di 25*3 // Check - should be matched
{res}75
{txt}
{com}.         drop _merge
{txt}
{com}.         sort age_sex_grp nutr_no 
{txt}
{com}.         distinct age_sex_grp nutr_no

{txt}{col 14}{c |}        Observations
{col 14}{c |}      total   distinct
{hline 13}{c +}{hline 22}
 age_sex_grp {c |}  {res}      575         25
     {txt}nutr_no {c |}  {res}      575         23
{txt}
{com}.         // Energy
.         merge m:m age_sex_grp nutr_no using `Energy'
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}             550
{txt}{col 9}from master{col 30}{res}             550{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}matched{col 30}{res}             100{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         drop _merge
{txt}
{com}.         order age_sex_grp nutr_no pal ear ul protein amdr_lower amdr_upper energy, first
{txt}
{com}.         sort age_sex_grp nutr_no pal
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\lilac2\AppData\Local\Temp\STD1b30_000000.tmp"
{txt}
{com}.                 expand 4 if inlist(nutr_no,3,4,5)
{txt}(225 observations created)

{com}.                 sort age_sex_grp nutr_no pal
{txt}
{com}.                 bys age_sex_grp nutr_no: egen v1=seq()
{txt}
{com}.                 forval i=1/4 {c -(}
{txt}  2{com}.                         replace pal=`i' if (v1==`i' & inlist(nutr_no,3,4,5))
{txt}  3{com}.                         {c )-}
{txt}(75 real changes made)
(75 real changes made)
(75 real changes made)
(75 real changes made)

{com}.                 destring energy, replace
{txt}energy: all characters numeric; {res}replaced {txt}as {res}double
{txt}(779 missing values generated)
{res}{txt}
{com}.                 bys age_sex_grp: replace energy=energy[_n-4] if (energy==. & nutr_no==3)
{txt}(96 real changes made)

{com}.                 bys age_sex_grp: replace energy=energy[_n-8] if (energy==. & nutr_no==4)
{txt}(96 real changes made)

{com}.                 bys age_sex_grp: replace energy=energy[_n-12] if (energy==. & nutr_no==5)
{txt}(96 real changes made)

{com}.                         list age_sex_grp energy nutr_no if inlist(nutr_no,2,3,4,5) // Check
{txt}
     {c TLC}{hline 10}{c -}{hline 11}{c -}{hline 9}{c TRC}
     {c |} {res}age_se~p      energy   nutr_no {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
  2. {c |} {res}       1           .         2 {txt}{c |}
  3. {c |} {res}       1           .         2 {txt}{c |}
  4. {c |} {res}       1           .         2 {txt}{c |}
  5. {c |} {res}       1           .         2 {txt}{c |}
  6. {c |} {res}       1           .         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
  7. {c |} {res}       1           .         3 {txt}{c |}
  8. {c |} {res}       1           .         3 {txt}{c |}
  9. {c |} {res}       1           .         3 {txt}{c |}
 10. {c |} {res}       1           .         4 {txt}{c |}
 11. {c |} {res}       1           .         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
 12. {c |} {res}       1           .         4 {txt}{c |}
 13. {c |} {res}       1           .         4 {txt}{c |}
 14. {c |} {res}       1           .         5 {txt}{c |}
 15. {c |} {res}       1           .         5 {txt}{c |}
 16. {c |} {res}       1           .         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
 17. {c |} {res}       1           .         5 {txt}{c |}
 37. {c |} {res}       2         723         2 {txt}{c |}
 38. {c |} {res}       2         723         2 {txt}{c |}
 39. {c |} {res}       2         723         2 {txt}{c |}
 40. {c |} {res}       2         723         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
 41. {c |} {res}       2         723         3 {txt}{c |}
 42. {c |} {res}       2         723         3 {txt}{c |}
 43. {c |} {res}       2         723         3 {txt}{c |}
 44. {c |} {res}       2         723         3 {txt}{c |}
 45. {c |} {res}       2         723         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
 46. {c |} {res}       2         723         4 {txt}{c |}
 47. {c |} {res}       2         723         4 {txt}{c |}
 48. {c |} {res}       2         723         4 {txt}{c |}
 49. {c |} {res}       2         723         5 {txt}{c |}
 50. {c |} {res}       2         723         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
 51. {c |} {res}       2         723         5 {txt}{c |}
 52. {c |} {res}       2         723         5 {txt}{c |}
 72. {c |} {res}       3         988         2 {txt}{c |}
 73. {c |} {res}       3         988         2 {txt}{c |}
 74. {c |} {res}       3         988         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
 75. {c |} {res}       3         988         2 {txt}{c |}
 76. {c |} {res}       3         988         3 {txt}{c |}
 77. {c |} {res}       3         988         3 {txt}{c |}
 78. {c |} {res}       3         988         3 {txt}{c |}
 79. {c |} {res}       3         988         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
 80. {c |} {res}       3         988         4 {txt}{c |}
 81. {c |} {res}       3         988         4 {txt}{c |}
 82. {c |} {res}       3         988         4 {txt}{c |}
 83. {c |} {res}       3         988         4 {txt}{c |}
 84. {c |} {res}       3         988         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
 85. {c |} {res}       3         988         5 {txt}{c |}
 86. {c |} {res}       3         988         5 {txt}{c |}
 87. {c |} {res}       3         988         5 {txt}{c |}
107. {c |} {res}       4         988         2 {txt}{c |}
108. {c |} {res}       4         988         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
109. {c |} {res}       4         988         2 {txt}{c |}
110. {c |} {res}       4         988         2 {txt}{c |}
111. {c |} {res}       4         988         3 {txt}{c |}
112. {c |} {res}       4         988         3 {txt}{c |}
113. {c |} {res}       4         988         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
114. {c |} {res}       4         988         3 {txt}{c |}
115. {c |} {res}       4         988         4 {txt}{c |}
116. {c |} {res}       4         988         4 {txt}{c |}
117. {c |} {res}       4         988         4 {txt}{c |}
118. {c |} {res}       4         988         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
119. {c |} {res}       4         988         5 {txt}{c |}
120. {c |} {res}       4         988         5 {txt}{c |}
121. {c |} {res}       4         988         5 {txt}{c |}
122. {c |} {res}       4         988         5 {txt}{c |}
142. {c |} {res}       5         988         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
143. {c |} {res}       5         988         2 {txt}{c |}
144. {c |} {res}       5         988         2 {txt}{c |}
145. {c |} {res}       5         988         2 {txt}{c |}
146. {c |} {res}       5         988         3 {txt}{c |}
147. {c |} {res}       5         988         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
148. {c |} {res}       5         988         3 {txt}{c |}
149. {c |} {res}       5         988         3 {txt}{c |}
150. {c |} {res}       5         988         4 {txt}{c |}
151. {c |} {res}       5         988         4 {txt}{c |}
152. {c |} {res}       5         988         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
153. {c |} {res}       5         988         4 {txt}{c |}
154. {c |} {res}       5         988         5 {txt}{c |}
155. {c |} {res}       5         988         5 {txt}{c |}
156. {c |} {res}       5         988         5 {txt}{c |}
157. {c |} {res}       5         988         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
177. {c |} {res}       6     1309.55         2 {txt}{c |}
178. {c |} {res}       6   1516.5685         2 {txt}{c |}
179. {c |} {res}       6    1723.587         2 {txt}{c |}
180. {c |} {res}       6    1978.379         2 {txt}{c |}
181. {c |} {res}       6     1309.55         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
182. {c |} {res}       6   1516.5685         3 {txt}{c |}
183. {c |} {res}       6    1723.587         3 {txt}{c |}
184. {c |} {res}       6    1978.379         3 {txt}{c |}
185. {c |} {res}       6     1309.55         4 {txt}{c |}
186. {c |} {res}       6   1516.5685         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
187. {c |} {res}       6    1723.587         4 {txt}{c |}
188. {c |} {res}       6    1978.379         4 {txt}{c |}
189. {c |} {res}       6     1309.55         5 {txt}{c |}
190. {c |} {res}       6   1516.5685         5 {txt}{c |}
191. {c |} {res}       6    1723.587         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
192. {c |} {res}       6    1978.379         5 {txt}{c |}
212. {c |} {res}       7      1244.6         2 {txt}{c |}
213. {c |} {res}       7    1451.656         2 {txt}{c |}
214. {c |} {res}       7    1645.771         2 {txt}{c |}
215. {c |} {res}       7    1969.296         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
216. {c |} {res}       7      1244.6         3 {txt}{c |}
217. {c |} {res}       7    1451.656         3 {txt}{c |}
218. {c |} {res}       7    1645.771         3 {txt}{c |}
219. {c |} {res}       7    1969.296         3 {txt}{c |}
220. {c |} {res}       7      1244.6         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
221. {c |} {res}       7    1451.656         4 {txt}{c |}
222. {c |} {res}       7    1645.771         4 {txt}{c |}
223. {c |} {res}       7    1969.296         4 {txt}{c |}
224. {c |} {res}       7      1244.6         5 {txt}{c |}
225. {c |} {res}       7    1451.656         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
226. {c |} {res}       7    1645.771         5 {txt}{c |}
227. {c |} {res}       7    1969.296         5 {txt}{c |}
247. {c |} {res}       8     1694.12         2 {txt}{c |}
248. {c |} {res}       8    2380.076         2 {txt}{c |}
249. {c |} {res}       8   2288.6152         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
250. {c |} {res}       8   2654.4584         2 {txt}{c |}
251. {c |} {res}       8     1694.12         3 {txt}{c |}
252. {c |} {res}       8    2380.076         3 {txt}{c |}
253. {c |} {res}       8   2288.6152         3 {txt}{c |}
254. {c |} {res}       8   2654.4584         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
255. {c |} {res}       8     1694.12         4 {txt}{c |}
256. {c |} {res}       8    2380.076         4 {txt}{c |}
257. {c |} {res}       8   2288.6152         4 {txt}{c |}
258. {c |} {res}       8   2654.4584         4 {txt}{c |}
259. {c |} {res}       8     1694.12         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
260. {c |} {res}       8    2380.076         5 {txt}{c |}
261. {c |} {res}       8   2288.6152         5 {txt}{c |}
262. {c |} {res}       8   2654.4584         5 {txt}{c |}
282. {c |} {res}       9     2323.02         2 {txt}{c |}
283. {c |} {res}       9    3290.496         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
284. {c |} {res}       9   3161.4992         2 {txt}{c |}
285. {c |} {res}       9   3677.4864         2 {txt}{c |}
286. {c |} {res}       9     2323.02         3 {txt}{c |}
287. {c |} {res}       9    3290.496         3 {txt}{c |}
288. {c |} {res}       9   3161.4992         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
289. {c |} {res}       9   3677.4864         3 {txt}{c |}
290. {c |} {res}       9     2323.02         4 {txt}{c |}
291. {c |} {res}       9    3290.496         4 {txt}{c |}
292. {c |} {res}       9   3161.4992         4 {txt}{c |}
293. {c |} {res}       9   3677.4864         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
294. {c |} {res}       9     2323.02         5 {txt}{c |}
295. {c |} {res}       9    3290.496         5 {txt}{c |}
296. {c |} {res}       9   3161.4992         5 {txt}{c |}
297. {c |} {res}       9   3677.4864         5 {txt}{c |}
317. {c |} {res}      10    2497.307         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
318. {c |} {res}      10   2724.8741         2 {txt}{c |}
319. {c |} {res}      10    3014.505         2 {txt}{c |}
320. {c |} {res}      10   3490.3272         2 {txt}{c |}
321. {c |} {res}      10    2497.307         3 {txt}{c |}
322. {c |} {res}      10   2724.8741         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
323. {c |} {res}      10    3014.505         3 {txt}{c |}
324. {c |} {res}      10   3490.3272         3 {txt}{c |}
325. {c |} {res}      10    2497.307         4 {txt}{c |}
326. {c |} {res}      10   2724.8741         4 {txt}{c |}
327. {c |} {res}      10    3014.505         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
328. {c |} {res}      10   3490.3272         4 {txt}{c |}
329. {c |} {res}      10    2497.307         5 {txt}{c |}
330. {c |} {res}      10   2724.8741         5 {txt}{c |}
331. {c |} {res}      10    3014.505         5 {txt}{c |}
332. {c |} {res}      10   3490.3272         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
352. {c |} {res}      11    2344.827         2 {txt}{c |}
353. {c |} {res}      11   2572.3941         2 {txt}{c |}
354. {c |} {res}      11    2862.025         2 {txt}{c |}
355. {c |} {res}      11   3337.8472         2 {txt}{c |}
356. {c |} {res}      11    2344.827         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
357. {c |} {res}      11   2572.3941         3 {txt}{c |}
358. {c |} {res}      11    2862.025         3 {txt}{c |}
359. {c |} {res}      11   3337.8472         3 {txt}{c |}
360. {c |} {res}      11    2344.827         4 {txt}{c |}
361. {c |} {res}      11   2572.3941         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
362. {c |} {res}      11    2862.025         4 {txt}{c |}
363. {c |} {res}      11   3337.8472         4 {txt}{c |}
364. {c |} {res}      11    2344.827         5 {txt}{c |}
365. {c |} {res}      11   2572.3941         5 {txt}{c |}
366. {c |} {res}      11    2862.025         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
367. {c |} {res}      11   3337.8472         5 {txt}{c |}
387. {c |} {res}      12    2154.227         2 {txt}{c |}
388. {c |} {res}      12   2381.7941         2 {txt}{c |}
389. {c |} {res}      12    2671.425         2 {txt}{c |}
390. {c |} {res}      12   3147.2472         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
391. {c |} {res}      12    2154.227         3 {txt}{c |}
392. {c |} {res}      12   2381.7941         3 {txt}{c |}
393. {c |} {res}      12    2671.425         3 {txt}{c |}
394. {c |} {res}      12   3147.2472         3 {txt}{c |}
395. {c |} {res}      12    2154.227         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
396. {c |} {res}      12   2381.7941         4 {txt}{c |}
397. {c |} {res}      12    2671.425         4 {txt}{c |}
398. {c |} {res}      12   3147.2472         4 {txt}{c |}
399. {c |} {res}      12    2154.227         5 {txt}{c |}
400. {c |} {res}      12   2381.7941         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
401. {c |} {res}      12    2671.425         5 {txt}{c |}
402. {c |} {res}      12   3147.2472         5 {txt}{c |}
422. {c |} {res}      13    2016.042         2 {txt}{c |}
423. {c |} {res}      13   2243.6091         2 {txt}{c |}
424. {c |} {res}      13     2533.24         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
425. {c |} {res}      13   3009.0622         2 {txt}{c |}
426. {c |} {res}      13    2016.042         3 {txt}{c |}
427. {c |} {res}      13   2243.6091         3 {txt}{c |}
428. {c |} {res}      13     2533.24         3 {txt}{c |}
429. {c |} {res}      13   3009.0622         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
430. {c |} {res}      13    2016.042         4 {txt}{c |}
431. {c |} {res}      13   2243.6091         4 {txt}{c |}
432. {c |} {res}      13     2533.24         4 {txt}{c |}
433. {c |} {res}      13   3009.0622         4 {txt}{c |}
434. {c |} {res}      13    2016.042         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
435. {c |} {res}      13   2243.6091         5 {txt}{c |}
436. {c |} {res}      13     2533.24         5 {txt}{c |}
437. {c |} {res}      13   3009.0622         5 {txt}{c |}
457. {c |} {res}      14     1536.46         2 {txt}{c |}
458. {c |} {res}      14   1814.8536         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
459. {c |} {res}      14   2075.8476         2 {txt}{c |}
460. {c |} {res}      14   2510.8376         2 {txt}{c |}
461. {c |} {res}      14     1536.46         3 {txt}{c |}
462. {c |} {res}      14   1814.8536         3 {txt}{c |}
463. {c |} {res}      14   2075.8476         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
464. {c |} {res}      14   2510.8376         3 {txt}{c |}
465. {c |} {res}      14     1536.46         4 {txt}{c |}
466. {c |} {res}      14   1814.8536         4 {txt}{c |}
467. {c |} {res}      14   2075.8476         4 {txt}{c |}
468. {c |} {res}      14   2510.8376         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
469. {c |} {res}      14     1536.46         5 {txt}{c |}
470. {c |} {res}      14   1814.8536         5 {txt}{c |}
471. {c |} {res}      14   2075.8476         5 {txt}{c |}
472. {c |} {res}      14   2510.8376         5 {txt}{c |}
492. {c |} {res}      15     1729.92         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
493. {c |} {res}      15   2063.9072         2 {txt}{c |}
494. {c |} {res}      15   2377.0202         2 {txt}{c |}
495. {c |} {res}      15   2898.8752         2 {txt}{c |}
496. {c |} {res}      15     1729.92         3 {txt}{c |}
497. {c |} {res}      15   2063.9072         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
498. {c |} {res}      15   2377.0202         3 {txt}{c |}
499. {c |} {res}      15   2898.8752         3 {txt}{c |}
500. {c |} {res}      15     1729.92         4 {txt}{c |}
501. {c |} {res}      15   2063.9072         4 {txt}{c |}
502. {c |} {res}      15   2377.0202         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
503. {c |} {res}      15   2898.8752         4 {txt}{c |}
504. {c |} {res}      15     1729.92         5 {txt}{c |}
505. {c |} {res}      15   2063.9072         5 {txt}{c |}
506. {c |} {res}      15   2377.0202         5 {txt}{c |}
507. {c |} {res}      15   2898.8752         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
527. {c |} {res}      16    1901.605         2 {txt}{c |}
528. {c |} {res}      16    2107.633         2 {txt}{c |}
529. {c |} {res}      16    2365.168         2 {txt}{c |}
530. {c |} {res}      16     2674.21         2 {txt}{c |}
531. {c |} {res}      16    1901.605         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
532. {c |} {res}      16    2107.633         3 {txt}{c |}
533. {c |} {res}      16    2365.168         3 {txt}{c |}
534. {c |} {res}      16     2674.21         3 {txt}{c |}
535. {c |} {res}      16    1901.605         4 {txt}{c |}
536. {c |} {res}      16    2107.633         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
537. {c |} {res}      16    2365.168         4 {txt}{c |}
538. {c |} {res}      16     2674.21         4 {txt}{c |}
539. {c |} {res}      16    1901.605         5 {txt}{c |}
540. {c |} {res}      16    2107.633         5 {txt}{c |}
541. {c |} {res}      16    2365.168         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
542. {c |} {res}      16     2674.21         5 {txt}{c |}
562. {c |} {res}      17    1791.045         2 {txt}{c |}
563. {c |} {res}      17    1997.073         2 {txt}{c |}
564. {c |} {res}      17    2254.608         2 {txt}{c |}
565. {c |} {res}      17     2563.65         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
566. {c |} {res}      17    1791.045         3 {txt}{c |}
567. {c |} {res}      17    1997.073         3 {txt}{c |}
568. {c |} {res}      17    2254.608         3 {txt}{c |}
569. {c |} {res}      17     2563.65         3 {txt}{c |}
570. {c |} {res}      17    1791.045         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
571. {c |} {res}      17    1997.073         4 {txt}{c |}
572. {c |} {res}      17    2254.608         4 {txt}{c |}
573. {c |} {res}      17     2563.65         4 {txt}{c |}
574. {c |} {res}      17    1791.045         5 {txt}{c |}
575. {c |} {res}      17    1997.073         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
576. {c |} {res}      17    2254.608         5 {txt}{c |}
577. {c |} {res}      17     2563.65         5 {txt}{c |}
597. {c |} {res}      18    1652.845         2 {txt}{c |}
598. {c |} {res}      18    1858.873         2 {txt}{c |}
599. {c |} {res}      18    2116.408         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
600. {c |} {res}      18     2425.45         2 {txt}{c |}
601. {c |} {res}      18    1652.845         3 {txt}{c |}
602. {c |} {res}      18    1858.873         3 {txt}{c |}
603. {c |} {res}      18    2116.408         3 {txt}{c |}
604. {c |} {res}      18     2425.45         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
605. {c |} {res}      18    1652.845         4 {txt}{c |}
606. {c |} {res}      18    1858.873         4 {txt}{c |}
607. {c |} {res}      18    2116.408         4 {txt}{c |}
608. {c |} {res}      18     2425.45         4 {txt}{c |}
609. {c |} {res}      18    1652.845         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
610. {c |} {res}      18    1858.873         5 {txt}{c |}
611. {c |} {res}      18    2116.408         5 {txt}{c |}
612. {c |} {res}      18     2425.45         5 {txt}{c |}
632. {c |} {res}      19     1552.65         2 {txt}{c |}
633. {c |} {res}      19    1758.678         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
634. {c |} {res}      19    2016.213         2 {txt}{c |}
635. {c |} {res}      19    2325.255         2 {txt}{c |}
636. {c |} {res}      19     1552.65         3 {txt}{c |}
637. {c |} {res}      19    1758.678         3 {txt}{c |}
638. {c |} {res}      19    2016.213         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
639. {c |} {res}      19    2325.255         3 {txt}{c |}
640. {c |} {res}      19     1552.65         4 {txt}{c |}
641. {c |} {res}      19    1758.678         4 {txt}{c |}
642. {c |} {res}      19    2016.213         4 {txt}{c |}
643. {c |} {res}      19    2325.255         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
644. {c |} {res}      19     1552.65         5 {txt}{c |}
645. {c |} {res}      19    1758.678         5 {txt}{c |}
646. {c |} {res}      19    2016.213         5 {txt}{c |}
647. {c |} {res}      19    2325.255         5 {txt}{c |}
667. {c |} {res}      20     2202.42         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
668. {c |} {res}      20   2468.8104         2 {txt}{c |}
669. {c |} {res}      20   2801.7984         2 {txt}{c |}
670. {c |} {res}      20    3201.384         2 {txt}{c |}
671. {c |} {res}      20     2202.42         3 {txt}{c |}
672. {c |} {res}      20   2468.8104         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
673. {c |} {res}      20   2801.7984         3 {txt}{c |}
674. {c |} {res}      20    3201.384         3 {txt}{c |}
675. {c |} {res}      20     2202.42         4 {txt}{c |}
676. {c |} {res}      20   2468.8104         4 {txt}{c |}
677. {c |} {res}      20   2801.7984         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
678. {c |} {res}      20    3201.384         4 {txt}{c |}
679. {c |} {res}      20     2202.42         5 {txt}{c |}
680. {c |} {res}      20   2468.8104         5 {txt}{c |}
681. {c |} {res}      20   2801.7984         5 {txt}{c |}
682. {c |} {res}      20    3201.384         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
702. {c |} {res}      21    2365.625         2 {txt}{c |}
703. {c |} {res}      21   2586.5354         2 {txt}{c |}
704. {c |} {res}      21   2862.6734         2 {txt}{c |}
705. {c |} {res}      21    3194.039         2 {txt}{c |}
706. {c |} {res}      21    2365.625         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
707. {c |} {res}      21   2586.5354         3 {txt}{c |}
708. {c |} {res}      21   2862.6734         3 {txt}{c |}
709. {c |} {res}      21    3194.039         3 {txt}{c |}
710. {c |} {res}      21    2365.625         4 {txt}{c |}
711. {c |} {res}      21   2586.5354         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
712. {c |} {res}      21   2862.6734         4 {txt}{c |}
713. {c |} {res}      21    3194.039         4 {txt}{c |}
714. {c |} {res}      21    2365.625         5 {txt}{c |}
715. {c |} {res}      21   2586.5354         5 {txt}{c |}
716. {c |} {res}      21   2862.6734         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
717. {c |} {res}      21    3194.039         5 {txt}{c |}
737. {c |} {res}      22    2255.065         2 {txt}{c |}
738. {c |} {res}      22   2475.9754         2 {txt}{c |}
739. {c |} {res}      22   2752.1134         2 {txt}{c |}
740. {c |} {res}      22    3083.479         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
741. {c |} {res}      22    2255.065         3 {txt}{c |}
742. {c |} {res}      22   2475.9754         3 {txt}{c |}
743. {c |} {res}      22   2752.1134         3 {txt}{c |}
744. {c |} {res}      22    3083.479         3 {txt}{c |}
745. {c |} {res}      22    2255.065         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
746. {c |} {res}      22   2475.9754         4 {txt}{c |}
747. {c |} {res}      22   2752.1134         4 {txt}{c |}
748. {c |} {res}      22    3083.479         4 {txt}{c |}
749. {c |} {res}      22    2255.065         5 {txt}{c |}
750. {c |} {res}      22   2475.9754         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
751. {c |} {res}      22   2752.1134         5 {txt}{c |}
752. {c |} {res}      22    3083.479         5 {txt}{c |}
772. {c |} {res}      23     2089.92         2 {txt}{c |}
773. {c |} {res}      23   2344.0104         2 {txt}{c |}
774. {c |} {res}      23   2661.6234         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
775. {c |} {res}      23    3042.759         2 {txt}{c |}
776. {c |} {res}      23     2089.92         3 {txt}{c |}
777. {c |} {res}      23   2344.0104         3 {txt}{c |}
778. {c |} {res}      23   2661.6234         3 {txt}{c |}
779. {c |} {res}      23    3042.759         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
780. {c |} {res}      23     2089.92         4 {txt}{c |}
781. {c |} {res}      23   2344.0104         4 {txt}{c |}
782. {c |} {res}      23   2661.6234         4 {txt}{c |}
783. {c |} {res}      23    3042.759         4 {txt}{c |}
784. {c |} {res}      23     2089.92         5 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
785. {c |} {res}      23   2344.0104         5 {txt}{c |}
786. {c |} {res}      23   2661.6234         5 {txt}{c |}
787. {c |} {res}      23    3042.759         5 {txt}{c |}
807. {c |} {res}      24    2231.605         2 {txt}{c |}
808. {c |} {res}      24    2437.633         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
809. {c |} {res}      24    2695.168         2 {txt}{c |}
810. {c |} {res}      24     3004.21         2 {txt}{c |}
811. {c |} {res}      24    2231.605         3 {txt}{c |}
812. {c |} {res}      24    2437.633         3 {txt}{c |}
813. {c |} {res}      24    2695.168         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
814. {c |} {res}      24     3004.21         3 {txt}{c |}
815. {c |} {res}      24    2231.605         4 {txt}{c |}
816. {c |} {res}      24    2437.633         4 {txt}{c |}
817. {c |} {res}      24    2695.168         4 {txt}{c |}
818. {c |} {res}      24     3004.21         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
819. {c |} {res}      24    2231.605         5 {txt}{c |}
820. {c |} {res}      24    2437.633         5 {txt}{c |}
821. {c |} {res}      24    2695.168         5 {txt}{c |}
822. {c |} {res}      24     3004.21         5 {txt}{c |}
842. {c |} {res}      25    2121.045         2 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
843. {c |} {res}      25    2327.073         2 {txt}{c |}
844. {c |} {res}      25    2584.608         2 {txt}{c |}
845. {c |} {res}      25     2893.65         2 {txt}{c |}
846. {c |} {res}      25    2121.045         3 {txt}{c |}
847. {c |} {res}      25    2327.073         3 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
848. {c |} {res}      25    2584.608         3 {txt}{c |}
849. {c |} {res}      25     2893.65         3 {txt}{c |}
850. {c |} {res}      25    2121.045         4 {txt}{c |}
851. {c |} {res}      25    2327.073         4 {txt}{c |}
852. {c |} {res}      25    2584.608         4 {txt}{c |}
     {c LT}{hline 10}{c -}{hline 11}{c -}{hline 9}{c RT}
853. {c |} {res}      25     2893.65         4 {txt}{c |}
854. {c |} {res}      25    2121.045         5 {txt}{c |}
855. {c |} {res}      25    2327.073         5 {txt}{c |}
856. {c |} {res}      25    2584.608         5 {txt}{c |}
857. {c |} {res}      25     2893.65         5 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 11}{c -}{hline 9}{c BRC}

{com}.                 drop v1 protein_perkg refweight_protein_kg
{txt}
{com}.                 * Replace missing EAR with value of energy
.                 replace ear=energy if ear==. & nutr_no==2
{txt}(96 real changes made)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\lilac2\AppData\Local\Temp\STD1b30_000000.tmp"
{txt}
{com}.         foreach v in amdr_lower amdr_upper {c -(}
{txt}  2{com}.                 destring `v', replace
{txt}  3{com}.                 {c )-}
{txt}amdr_lower: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(599 missing values generated)
{res}{txt}amdr_upper: all characters numeric; {res}replaced {txt}as {res}byte
{txt}(599 missing values generated)
{res}{txt}
{com}.         // Convert to percent and multiply by total energy
.         gen amdr_kcal_lower=energy*amdr_lower/100 if inlist(nutr_no,3,4,5)
{txt}(599 missing values generated)

{com}.         gen amdr_kcal_upper=energy*amdr_upper/100 if inlist(nutr_no,3,4,5)
{txt}(599 missing values generated)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\lilac2\AppData\Local\Temp\STD1b30_000000.tmp"
{txt}
{com}.         replace amdr_lower=amdr_kcal_lower/4 if inlist(nutr_no,3,4)
{txt}variable {bf}amdr_lower{sf} was {bf}{res}byte{sf}{txt} now {bf}{res}float{sf}
{txt}(184 real changes made)

{com}.         replace amdr_lower=amdr_kcal_lower/9 if nutr_no==5
{txt}(92 real changes made)

{com}.         replace amdr_upper=amdr_kcal_upper/4 if inlist(nutr_no,3,4)
{txt}variable {bf}amdr_upper{sf} was {bf}{res}byte{sf}{txt} now {bf}{res}float{sf}
{txt}(184 real changes made)

{com}.         replace amdr_upper=amdr_kcal_upper/9 if nutr_no==5
{txt}(92 real changes made)

{com}.         replace amdr_lower=. if !inlist(nutr_no,3,4,5)
{txt}(0 real changes made)

{com}.         replace amdr_upper=. if !inlist(nutr_no,3,4,5)
{txt}(0 real changes made)

{com}.         // Result: total grams 
.         replace amdr_unit="g" if inlist(nutr_no,3,4,5)
{txt}(300 real changes made)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\lilac2\AppData\Local\Temp\STD1b30_000000.tmp"
{txt}
{com}. describe

{txt}Contains data from {res}C:\Users\lilac2\AppData\Local\Temp\ST_1b30_000001.tmp
{txt}  obs:{res}           875                          
{txt} vars:{res}            19                          8 Apr 2020 17:18
{txt}{hline}
              storage   display    value
variable name   type    format     label      variable label
{hline}
{p 0 48}{res}{bind:age_sex_grp    }{txt}{bind: byte    }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}age_sex_grp{p_end}
{p 0 48}{bind:nutr_no        }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:pal            }{txt}{bind: long    }{bind:{txt}%11.0g    }{space 1}{bind:pal      }{bind:  }{res}{res}PA_level{p_end}
{p 0 48}{bind:ear            }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:ul             }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:protein        }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}protein{p_end}
{p 0 48}{bind:amdr_lower     }{txt}{bind: float   }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:amdr_upper     }{txt}{bind: float   }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:energy         }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}energy{p_end}
{p 0 48}{bind:lifestage      }{txt}{bind: str11   }{bind:{txt}%11s      }{space 1}{bind:         }{bind:  }{res}{res}lifestage{p_end}
{p 0 48}{bind:sex            }{txt}{bind: str6    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}sex{p_end}
{p 0 48}{bind:age_lower_yrs  }{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}age_lower_yrs{p_end}
{p 0 48}{bind:age_upper_yrs  }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}age_upper_yrs{p_end}
{p 0 48}{bind:unit           }{txt}{bind: str4    }{bind:{txt}%9s       }{space 1}{bind:         }{bind:  }{res}{res}unit{p_end}
{p 0 48}{bind:ul_note        }{txt}{bind: str44   }{bind:{txt}%44s      }{space 1}{bind:         }{bind:  }{res}{res}ul_note{p_end}
{p 0 48}{bind:amdr_unit      }{txt}{bind: str12   }{bind:{txt}%12s      }{space 1}{bind:         }{bind:  }{res}{res}amdr_unit{p_end}
{p 0 48}{bind:carbohydrate   }{txt}{bind: int     }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}carbohydrate{p_end}
{p 0 48}{bind:amdr_kcal_lower}{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:amdr_kcal_upper}{txt}{bind: double  }{bind:{txt}%10.0g    }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by: {res}age_sex_grp  nutr_no
     Note: Dataset has changed since last saved.
{txt}
{com}. encode lifestage, gen(lifestage2)
{txt}
{com}.         drop lifestage
{txt}
{com}.         rename lifestage2 lifestage
{res}{txt}
{com}. tab sex

        {txt}sex {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
     Female {c |}{res}        490       56.00       56.00
{txt}       Male {c |}{res}        280       32.00       88.00
{txt}        all {c |}{res}        105       12.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        875      100.00
{txt}
{com}. encode sex, gen(sex2)
{txt}
{com}.         tab sex2, nolabel

        {txt}sex {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        490       56.00       56.00
{txt}          2 {c |}{res}        280       32.00       88.00
{txt}          3 {c |}{res}        105       12.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        875      100.00
{txt}
{com}.         drop sex
{txt}
{com}.         rename sex2 sex
{res}{txt}
{com}.         tab sex

        {txt}sex {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
     Female {c |}{res}        490       56.00       56.00
{txt}       Male {c |}{res}        280       32.00       88.00
{txt}        all {c |}{res}        105       12.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        875      100.00
{txt}
{com}.         recode sex (2=0)
{txt}(sex: 280 changes made)

{com}.         replace sex=. if sex==3
{txt}(105 real changes made, 105 to missing)

{com}.         tab sex

        {txt}sex {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}        280       36.36       36.36
{txt}     Female {c |}{res}        490       63.64      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        770      100.00
{txt}
{com}.         lab def sex 0 "Male" 1 "Female"
{txt}
{com}.         lab val sex sex
{txt}
{com}. foreach v in age_lower_yrs age_upper_yrs {c -(}
{txt}  2{com}.         destring `v', replace
{txt}  3{com}.         {c )-}
{txt}age_lower_yrs already numeric; no {res}replace
{txt}age_upper_yrs: all characters numeric; {res}replaced {txt}as {res}double
{txt}(70 missing values generated)
{res}{txt}
{com}. * Order and Sort
. drop protein carbohydrate energy amdr_kcal_lower amdr_kcal_upper
{txt}
{com}. order age_sex_grp nutr_no pal ear ul amdr_lower amdr_upper , first
{txt}
{com}. sort age_sex_grp nutr_no pal
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\lilac2\AppData\Local\Temp\STD1b30_000000.tmp"
{txt}
{com}. * Label nutrients
. gen nutr="."
{txt}
{com}. replace nutr="Price" if nutr_no==1
{txt}variable {bf}nutr{sf} was {bf}{res}str1{sf}{txt} now {bf}{res}str5{sf}
{txt}(25 real changes made)

{com}. replace nutr="Energy" if nutr_no==2
{txt}variable {bf}nutr{sf} was {bf}{res}str5{sf}{txt} now {bf}{res}str6{sf}
{txt}(100 real changes made)

{com}. replace nutr="Carbohydrate" if nutr_no==3
{txt}variable {bf}nutr{sf} was {bf}{res}str6{sf}{txt} now {bf}{res}str12{sf}
{txt}(100 real changes made)

{com}. replace nutr="Protein" if nutr_no==4
{txt}(100 real changes made)

{com}. replace nutr="Lipids" if nutr_no==5
{txt}(100 real changes made)

{com}. replace nutr="Vit_A" if nutr_no==6
{txt}(25 real changes made)

{com}. replace nutr="Retinol" if nutr_no==7
{txt}(25 real changes made)

{com}. replace nutr="Vit_C" if nutr_no==8
{txt}(25 real changes made)

{com}. replace nutr="Vit_E" if nutr_no==9
{txt}(25 real changes made)

{com}. replace nutr="Thiamin" if nutr_no==10
{txt}(25 real changes made)

{com}. replace nutr="Riboflavin" if nutr_no==11
{txt}(25 real changes made)

{com}. replace nutr="Niacin" if nutr_no==12
{txt}(25 real changes made)

{com}. replace nutr="Vit_B6" if nutr_no==13
{txt}(25 real changes made)

{com}. replace nutr="Folate" if nutr_no==14
{txt}(25 real changes made)

{com}. replace nutr="Vit_B12" if nutr_no==15
{txt}(25 real changes made)

{com}. replace nutr="Calcium" if nutr_no==16
{txt}(25 real changes made)

{com}. replace nutr="Copper" if nutr_no==17
{txt}(25 real changes made)

{com}. replace nutr="Iron" if nutr_no==18
{txt}(25 real changes made)

{com}. replace nutr="Magnesium" if nutr_no==19
{txt}(25 real changes made)

{com}. replace nutr="Phosphorus" if nutr_no==20
{txt}(25 real changes made)

{com}. replace nutr="Selenium" if nutr_no==21
{txt}(25 real changes made)

{com}. replace nutr="Zinc" if nutr_no==22
{txt}(25 real changes made)

{com}. replace nutr="Sodium" if nutr_no==23
{txt}(25 real changes made)

{com}. order nutr, after(nutr_no)
{txt}
{com}. 
. replace ear=0 if nutr=="Price"
{txt}(25 real changes made)

{com}. 
. order age_sex_grp nutr_no nutr ear ul amdr_lower amdr_upper pal unit, first
{txt}
{com}. save EAR+UL+AMDR+CDDR_allgroups, replace
{txt}file EAR+UL+AMDR+CDDR_allgroups.dta saved

{com}. 
{txt}end of do-file

{com}. do "C:\Users\lilac2\AppData\Local\Temp\STD1b30_000000.tmp"
{txt}
{com}.         use "$myfiles\EAR+UL+AMDR+CDDR_allgroups", clear
{txt}
{com}.                 keep if age_sex_grp==16
{txt}(840 observations deleted)

{com}.                 tab nutr

        {txt}nutr {c |}      Freq.     Percent        Cum.
{hline 13}{c +}{hline 35}
     Calcium {c |}{res}          1        2.86        2.86
{txt}Carbohydrate {c |}{res}          4       11.43       14.29
{txt}      Copper {c |}{res}          1        2.86       17.14
{txt}      Energy {c |}{res}          4       11.43       28.57
{txt}      Folate {c |}{res}          1        2.86       31.43
{txt}        Iron {c |}{res}          1        2.86       34.29
{txt}      Lipids {c |}{res}          4       11.43       45.71
{txt}   Magnesium {c |}{res}          1        2.86       48.57
{txt}      Niacin {c |}{res}          1        2.86       51.43
{txt}  Phosphorus {c |}{res}          1        2.86       54.29
{txt}       Price {c |}{res}          1        2.86       57.14
{txt}     Protein {c |}{res}          4       11.43       68.57
{txt}     Retinol {c |}{res}          1        2.86       71.43
{txt}  Riboflavin {c |}{res}          1        2.86       74.29
{txt}    Selenium {c |}{res}          1        2.86       77.14
{txt}      Sodium {c |}{res}          1        2.86       80.00
{txt}     Thiamin {c |}{res}          1        2.86       82.86
{txt}       Vit_A {c |}{res}          1        2.86       85.71
{txt}     Vit_B12 {c |}{res}          1        2.86       88.57
{txt}      Vit_B6 {c |}{res}          1        2.86       91.43
{txt}       Vit_C {c |}{res}          1        2.86       94.29
{txt}       Vit_E {c |}{res}          1        2.86       97.14
{txt}        Zinc {c |}{res}          1        2.86      100.00
{txt}{hline 13}{c +}{hline 35}
       Total {c |}{res}         35      100.00
{txt}
{com}.                 drop if inlist(pal,1,2,4)
{txt}(12 observations deleted)

{com}.                 tab nutr_no

    {txt}nutr_no {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}          1        4.35        4.35
{txt}          2 {c |}{res}          1        4.35        8.70
{txt}          3 {c |}{res}          1        4.35       13.04
{txt}          4 {c |}{res}          1        4.35       17.39
{txt}          5 {c |}{res}          1        4.35       21.74
{txt}          6 {c |}{res}          1        4.35       26.09
{txt}          7 {c |}{res}          1        4.35       30.43
{txt}          8 {c |}{res}          1        4.35       34.78
{txt}          9 {c |}{res}          1        4.35       39.13
{txt}         10 {c |}{res}          1        4.35       43.48
{txt}         11 {c |}{res}          1        4.35       47.83
{txt}         12 {c |}{res}          1        4.35       52.17
{txt}         13 {c |}{res}          1        4.35       56.52
{txt}         14 {c |}{res}          1        4.35       60.87
{txt}         15 {c |}{res}          1        4.35       65.22
{txt}         16 {c |}{res}          1        4.35       69.57
{txt}         17 {c |}{res}          1        4.35       73.91
{txt}         18 {c |}{res}          1        4.35       78.26
{txt}         19 {c |}{res}          1        4.35       82.61
{txt}         20 {c |}{res}          1        4.35       86.96
{txt}         21 {c |}{res}          1        4.35       91.30
{txt}         22 {c |}{res}          1        4.35       95.65
{txt}         23 {c |}{res}          1        4.35      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         23      100.00
{txt}
{com}.                 keep nutr_no nutr ear ul amdr_lower amdr_upper unit ul_note
{txt}
{com}.                 save NR16_DRIWeight_PAL3, replace
{txt}file NR16_DRIWeight_PAL3.dta saved

{com}. 
{txt}end of do-file

{com}. do "C:\Users\lilac2\AppData\Local\Temp\STD1b30_000000.tmp"
{txt}
{com}.         use "$myfiles\EAR+UL+AMDR+CDDR_WHOgrowthref_allgroups", clear
{txt}
{com}.                 keep if age_sex_grp==16
{txt}(840 observations deleted)

{com}.                 tab nutr

        {txt}nutr {c |}      Freq.     Percent        Cum.
{hline 13}{c +}{hline 35}
     Calcium {c |}{res}          1        2.86        2.86
{txt}Carbohydrate {c |}{res}          4       11.43       14.29
{txt}      Copper {c |}{res}          1        2.86       17.14
{txt}      Energy {c |}{res}          4       11.43       28.57
{txt}      Folate {c |}{res}          1        2.86       31.43
{txt}        Iron {c |}{res}          1        2.86       34.29
{txt}      Lipids {c |}{res}          4       11.43       45.71
{txt}   Magnesium {c |}{res}          1        2.86       48.57
{txt}      Niacin {c |}{res}          1        2.86       51.43
{txt}  Phosphorus {c |}{res}          1        2.86       54.29
{txt}       Price {c |}{res}          1        2.86       57.14
{txt}     Protein {c |}{res}          4       11.43       68.57
{txt}     Retinol {c |}{res}          1        2.86       71.43
{txt}  Riboflavin {c |}{res}          1        2.86       74.29
{txt}    Selenium {c |}{res}          1        2.86       77.14
{txt}      Sodium {c |}{res}          1        2.86       80.00
{txt}     Thiamin {c |}{res}          1        2.86       82.86
{txt}       Vit_A {c |}{res}          1        2.86       85.71
{txt}     Vit_B12 {c |}{res}          1        2.86       88.57
{txt}      Vit_B6 {c |}{res}          1        2.86       91.43
{txt}       Vit_C {c |}{res}          1        2.86       94.29
{txt}       Vit_E {c |}{res}          1        2.86       97.14
{txt}        Zinc {c |}{res}          1        2.86      100.00
{txt}{hline 13}{c +}{hline 35}
       Total {c |}{res}         35      100.00
{txt}
{com}.                 drop if inlist(pal,1,2,4)
{txt}(12 observations deleted)

{com}.                 tab nutr_no

    {txt}nutr_no {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}          1        4.35        4.35
{txt}          2 {c |}{res}          1        4.35        8.70
{txt}          3 {c |}{res}          1        4.35       13.04
{txt}          4 {c |}{res}          1        4.35       17.39
{txt}          5 {c |}{res}          1        4.35       21.74
{txt}          6 {c |}{res}          1        4.35       26.09
{txt}          7 {c |}{res}          1        4.35       30.43
{txt}          8 {c |}{res}          1        4.35       34.78
{txt}          9 {c |}{res}          1        4.35       39.13
{txt}         10 {c |}{res}          1        4.35       43.48
{txt}         11 {c |}{res}          1        4.35       47.83
{txt}         12 {c |}{res}          1        4.35       52.17
{txt}         13 {c |}{res}          1        4.35       56.52
{txt}         14 {c |}{res}          1        4.35       60.87
{txt}         15 {c |}{res}          1        4.35       65.22
{txt}         16 {c |}{res}          1        4.35       69.57
{txt}         17 {c |}{res}          1        4.35       73.91
{txt}         18 {c |}{res}          1        4.35       78.26
{txt}         19 {c |}{res}          1        4.35       82.61
{txt}         20 {c |}{res}          1        4.35       86.96
{txt}         21 {c |}{res}          1        4.35       91.30
{txt}         22 {c |}{res}          1        4.35       95.65
{txt}         23 {c |}{res}          1        4.35      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         23      100.00
{txt}
{com}.                 keep nutr_no nutr ear ul amdr_lower amdr_upper unit ul_note
{txt}
{com}.                 save NR10_WHOWeight_PAL4, replace
{txt}file NR10_WHOWeight_PAL4.dta saved

{com}. 
{txt}end of do-file

{com}. do "C:\Users\lilac2\AppData\Local\Temp\STD1b30_000000.tmp"
{txt}
{com}.         use "$myfiles\EAR+UL+AMDR+CDDR+BF_WHOgrowthref_allgroups", clear
{txt}
{com}.                 keep if age_sex_grp==16
{txt}(910 observations deleted)

{com}.                 drop if inlist(pal,1,2,4) // PAL does not affect energy requirements for this group, keep any one
{txt}(12 observations deleted)

{com}.                 keep nutr_no nutr ear ul amdr_lower amdr_upper unit ul_note
{txt}
{com}.                 save NR3_WHOWeight_ContBF, replace
{txt}file NR3_WHOWeight_ContBF.dta saved

{com}. 
{txt}end of do-file

{com}. exit, clear
